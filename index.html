<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DASH Player Full Default</title>

<!-- Shaka Player UI CSS -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/controls.min.css">

<style>
body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

#player-container {
    width: 100%;
    max-width: 100%;
    aspect-ratio: 16/9;
    background: black;
    position: relative;
}

video.shaka-video {
    width: 100%;
    height: 100%;
    background: transparent;
}

.shaka-controls-container {
    background: transparent;
}

.shaka-controls-button-panel > button {
    color: white !important;
}

/* No custom Seek bar styling */
/* All colors, heights, overlay handled by Shaka Player built-in system */
</style>
</head>
<body>

<div id="player-container" class="shaka-video-container">
    <video id="video"
           autoplay
           playsinline
           class="shaka-video"></video>
    <div class="shaka-controls-container"></div>
</div>

<!-- Shaka Player JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/shaka-player.ui.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
    const video = document.getElementById('video');
    const container = document.getElementById('player-container');

    // Initialize Shaka Player
    const player = new shaka.Player(video);

    // Error handling
    player.addEventListener('error', e => console.error('Error code', e.detail.code, 'object', e.detail));

    // Attach built-in UI
    const ui = new shaka.ui.Overlay(player, container, video);

    // Configure UI: Control buttons + Settings menu
    ui.configure({
        controlPanelElements: [
            'play_pause', 'mute', 'volume', 'time_and_duration', 'spacer',
            'overflow_menu', 'picture_in_picture', 'fullscreen'
        ],
        settingsMenuElements: [
            'quality', 'playback_rate'
        ]
    });

    // DRM ClearKey configure
    player.configure({
        drm: {
            clearKeys: {
                'a6dfc4f17d70d8d07639659193f03b25': '893eacfabe386144b81733d622a7ad17'
            }
        },
        abr: { enabled: true } // Auto resolution
    });

    // DASH Manifest
    const manifestUri =
        'https://live2.shoq.com.pk/live/eds/ICC_Women_World_Cup_2025/DASH/ICC_Women_World_Cup_2025.mpd';

    try {
        await player.load(manifestUri);
        console.log('✅ Stream loaded successfully');
    } catch (error) {
        console.error('❌ Error loading stream:', error);
    }

    // Built-in Shaka Player overlay handles play/pause automatically
});
</script>

</body>
</html>
